å¥½çš„ï¼Œæˆ‘å€‘ç¾åœ¨é›¢é–‹è²¡å‹™éƒ¨é–€ï¼Œé–‹å§‹æ“´å±•å¦ä¸€å€‹æ ¸å¿ƒæ¨¡çµ„ï¼š**å®¢æˆ¶é—œä¿‚ç®¡ç† (CRM)**ã€‚

é€™å°‡æ˜¯ **V2 å„ªåŒ–**çš„ä¸‹ä¸€éšæ®µï¼Œç”¨æ–¼è¿½è¹¤éŠ·å”®æµç¨‹ã€ç®¡ç†å®¢æˆ¶è³‡æ–™å’Œç›£æ§å®¢æˆ¶æœå‹™ç‹€æ³ã€‚

### ğŸš€ V2 å„ªåŒ–ï¼šæ–°å¢ã€Œå®¢æˆ¶é—œä¿‚ç®¡ç† (CRM)ã€è¦–åœ–

æˆ‘å€‘å°‡æ¡å–ä»¥ä¸‹æ­¥é©Ÿï¼š

1.  **æ–°å¢ HTML çµæ§‹ (`crm-module-view`)**: å‰µå»ºä¸€å€‹å…¨æ–°çš„ `<section>` ä¾†æ‰¿è¼‰ CRM å„€è¡¨æ¿ã€‚
2.  **æ›´æ–°ä¸»é¸å–®å°èˆª**: è®“ä¸»é¸å–®ä¸­çš„ã€Œå®¢æˆ¶é—œä¿‚ç®¡ç† (CRM)ã€æŒ‰éˆ•å°èˆªåˆ°é€™å€‹æ–°è¦–åœ–ã€‚
3.  **æ ¸å¿ƒ CRM æ•¸æ“š**: åŠ å…¥é—œéµæŒ‡æ¨™ï¼ˆKPIsï¼‰å’Œä¸€å€‹æ¨¡æ“¬çš„éŠ·å”®æ¼æ–—åœ–ã€‚

è«‹çœ‹ä»¥ä¸‹**å®Œæ•´ã€å·²å„ªåŒ–**çš„ HTML ç¨‹å¼ç¢¼ã€‚æ–°çš„å…§å®¹é›†ä¸­åœ¨ `CRM Management View` éƒ¨åˆ†ï¼Œä¸¦ä¸” `showView` å‡½æ•¸å·²æ›´æ–°ã€‚

-----

### IGB ERP æ•¸ä½ä¼æ¥­å‘½ä»¤ä¸­å¿ƒ (V2) - æ–°å¢ CRM æ¨¡çµ„

ï¼ˆç¨‹å¼ç¢¼å·²çœç•¥é€šç”¨éƒ¨åˆ†å’Œå·²å®Œæˆçš„è²¡å‹™æ¨¡çµ„è¦–åœ–ï¼Œé‡é»å±•ç¤ºæ–°å¢å’Œä¿®æ”¹çš„éƒ¨åˆ†ã€‚ï¼‰

```html
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IGB ERP æ•¸ä½ä¼æ¥­å‘½ä»¤ä¸­å¿ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* ... (CSS æ¨£å¼ä¿æŒä¸è®Š) ... */
        :root { font-family: 'Inter', sans-serif; }
        .module-card { transition: all 0.3s ease; transform: scale(1); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); }
        .module-card:hover { transform: scale(1.02); box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.5), 0 4px 6px -4px rgba(59, 130, 246, 0.5); border-color: #3b82f6; }
        @keyframes pulse-ring { 0% { transform: scale(0.33); opacity: 1; } 100% { transform: scale(1.5); opacity: 0; } }
        .core-pulse { animation: pulse-ring 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .dashboard-card { transition: all 0.2s ease-in-out; border: 1px solid transparent; }
        .dashboard-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3), 0 4px 6px -4px rgba(37, 99, 235, 0.3); border-color: #3b82f6; }
        .nav-button { transition: all 0.2s; }
        .nav-button:hover { background-color: #374151; }
        /* åˆ—å°æ¨£å¼å„ªåŒ– (ä¿æŒä¸è®Š) */
        @media print { .print-hide, footer { display: none !important; } body { background-color: #fff !important; color: #000 !important; padding: 0 !important; margin: 0 !important; } .dashboard-card, .bg-gray-800, .bg-gray-900, .bg-gray-700, .bg-gray-600 { box-shadow: none !important; border: 1px solid #ccc !important; background-color: #fff !important; color: #000 !important; } .text-yellow-300, .text-indigo-300, .text-red-300, .text-green-300 { color: #000 !important; } .lg\:col-span-2 { grid-column: span 3 / span 3 !important; width: 100% !important; } canvas { max-width: 100%; } }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen p-4 md:p-8">

    <div id="app-container">

        <section id="main-menu-view" class="">
            <header class="mb-8 text-center">
                <h1 class="text-4xl md:text-5xl font-extrabold text-blue-400 tracking-tight">IGB ERP æ•¸ä½ä¼æ¥­å‘½ä»¤ä¸­å¿ƒ</h1>
                <p class="text-lg text-gray-400 mt-2">çµ±åˆæ•¸æ“šæµï¼Œé©…å‹•æ±ºç­–ï¼Œå¯¦ç¾å“è¶Šç‡Ÿé‹</p>
            </header>
            <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1 bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700">
                    <h2 class="text-2xl font-bold text-gray-50 mb-6 border-b border-blue-500/50 pb-3"><svg class="inline w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="14" y="3" rx="1"/><rect width="7" height="7" x="14" y="14" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/></svg>ç³»çµ±å…¨è²Œï¼šIGB æ•¸ä½ä¼æ¥­æ ¸å¿ƒ</h2>
                    <div class="flex flex-col items-center justify-center p-6 bg-gray-700/50 rounded-lg">
                        <div class="relative w-32 h-32 flex items-center justify-center mb-10"><span class="absolute inline-flex h-full w-full rounded-full bg-blue-500 opacity-75 core-pulse"></span><div class="relative inline-flex rounded-full h-28 w-28 bg-blue-600 flex flex-col items-center justify-center border-4 border-blue-400 shadow-xl"><span class="text-xl font-extrabold text-white">IGB</span><span class="text-xs font-medium text-blue-100 mt-1">å‘½ä»¤ä¸­å¿ƒ</span></div></div>
                        <div class="w-full flex justify-between text-center mb-6"><div class="text-sm font-medium text-green-400">æ•¸æ“šé©…å‹•æ±ºç­–</div><div class="text-sm font-medium text-yellow-400">å³æ™‚æ´å¯Ÿ</div></div>
                        <div class="w-full grid grid-cols-3 gap-3 text-center"><div class="p-2 bg-gray-600 rounded-md text-xs font-semibold">å‰ç«¯æ‡‰ç”¨ (Apps)</div><div class="p-2 bg-gray-600 rounded-md text-xs font-semibold">ç‰©è¯ç¶² (IoT)</div><div class="p-2 bg-gray-600 rounded-md text-xs font-semibold">å‚³çµ±ç³»çµ± (Legacy)</div></div>
                        <div class="mt-8 pt-4 border-t border-gray-600 w-full"><h3 class="text-lg font-semibold text-gray-300 mb-2">æ ¸å¿ƒåƒ¹å€¼ï¼šçµ±åˆèˆ‡å„ªåŒ–</h3><ul class="space-y-2 text-sm text-gray-400"><li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.001 12.001 0 0012 21a12.001 12.001 0 008.618-3.016z"></path></svg>æ¥­å‹™æµç¨‹è‡ªå‹•åŒ– (BPA)</li><li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>å–®ä¸€çœŸå¯¦æ•¸æ“šæº (Single Source of Truth)</li><li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7v10M17 5v14m-12 0h12a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>è·¨éƒ¨é–€å”ä½œé€æ˜åŒ–</li></ul></div>
                    </div>
                </div>

                <div class="lg:col-span-2 bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700">
                    <h2 class="text-2xl font-bold text-gray-50 mb-6 border-b border-blue-500/50 pb-3"><svg class="inline w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><path d="m3.3 7 8.7 5 9.1-5"/><path d="M12 22v-8"/><path d="m11.2 15-8.4-4.8"/><path d="m12.8 15 8.4-4.8"/></svg>æ•¸ä½åŒ–ä¼æ¥­çš„æ ¸å¿ƒæ¨¡çµ„ï¼</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-green-500 cursor-pointer" onclick="showView('finance')"><h3 class="text-xl font-semibold text-green-400 mb-1">è²¡å‹™ç®¡ç† (Finance)</h3><p class="text-sm text-gray-400">ç¸½å¸³ã€æ‡‰æ”¶/æ‡‰ä»˜ã€å›ºå®šè³‡ç”¢ã€é ç®—èˆ‡è²¡å‹™åˆ†æã€‚ç¢ºä¿æœƒè¨ˆæº–ç¢ºæ€§èˆ‡ç¾é‡‘æµå¥åº·ã€‚</p></div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-yellow-500 cursor-pointer"><h3 class="text-xl font-semibold text-yellow-400 mb-1">ä¾›æ‡‰éˆç®¡ç† (SCM)</h3><p class="text-sm text-gray-400">æ¡è³¼ã€ä¾›æ‡‰å•†ç®¡ç†ã€åº«å­˜å„ªåŒ–åŠç‰©æµè¿½è¹¤ã€‚å¾æºé ­åˆ°äº¤ä»˜çš„å…¨æµç¨‹æ§åˆ¶ã€‚</p></div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-red-500 cursor-pointer"><h3 class="text-xl font-semibold text-red-400 mb-1">ç”Ÿç”¢è£½é€  (Manufacturing)</h3><p class="text-sm text-gray-400">ç‰©æ–™æ¸…å–® (BOM)ã€å·¥å–®ç®¡ç†ã€ç”¢èƒ½è¦åŠƒ (MRP) åŠè»Šé–“åŸ·è¡Œç³»çµ± (MES) æ•´åˆã€‚</p></div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-pink-500 cursor-pointer"><h3 class="text-xl font-semibold text-pink-400 mb-1">äººåŠ›è³‡æº (HR)</h3><p class="text-sm text-gray-400">å“¡å·¥è³‡æ–™ã€è€ƒå‹¤ç®¡ç†ã€è–ªè³‡è¨ˆç®—èˆ‡ç™¼æ”¾ã€ç¸¾æ•ˆè€ƒæ ¸åŠäººæ‰ç™¼å±•ã€‚</p></div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-indigo-500 cursor-pointer" onclick="showView('crm')">
                            <h3 class="text-xl font-semibold text-indigo-400 mb-1">å®¢æˆ¶é—œä¿‚ç®¡ç† (CRM)</h3>
                            <p class="text-sm text-gray-400">éŠ·å”®æ©Ÿæœƒè¿½è¹¤ã€å®¢æˆ¶æœå‹™æ”¯æ´ã€è¡ŒéŠ·æ´»å‹•ç®¡ç†åŠå”®å¾Œæœå‹™ã€‚</p>
                        </div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-blue-500 cursor-pointer"><h3 class="text-xl font-semibold text-blue-400 mb-1">å•†æ¥­æ™ºæ…§ (BI)</h3><p class="text-sm text-gray-400">æ•¸æ“šå€‰åº«ã€å ±è¡¨å„€è¡¨æ¿ã€æ•¸æ“šæŒ–æ˜èˆ‡é æ¸¬åˆ†æã€‚ç‚ºé«˜å±¤æ±ºç­–æä¾›æ”¯æŒã€‚</p></div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-purple-500 cursor-pointer"><h3 class="text-xl font-semibold text-purple-400 mb-1">å°ˆæ¡ˆç®¡ç† (Project Mgmt)</h3><p class="text-sm text-gray-400">å°ˆæ¡ˆè¦åŠƒã€è³‡æºåˆ†é…ã€é€²åº¦è¿½è¹¤ã€æ™‚é–“è¡¨ç®¡ç†åŠæˆæœ¬æ§åˆ¶ã€‚</p></div>
                        <div class="module-card p-4 bg-gray-700 rounded-lg border-l-4 border-teal-500 cursor-pointer"><h3 class="text-xl font-semibold text-teal-400 mb-1">å€‰å„²ç®¡ç† (WMS)</h3><p class="text-sm text-gray-400">å…¥åº«ã€å‡ºåº«ã€ç›¤é»ã€å„²ä½ç®¡ç†åŠæ‰¹æ¬¡è¿½æº¯ã€‚æå‡å€‰åº«ä½œæ¥­æ•ˆç‡èˆ‡æº–ç¢ºæ€§ã€‚</p></div>
                    </div>
                </div>
            </main>
        </section>

        <section id="finance-module-view" class="hidden">...</section>
        <section id="general-ledger-view" class="hidden">...</section>
        <section id="ar-module-view" class="hidden">...</section>
        <section id="ap-module-view" class="hidden">...</section>
        <section id="fa-module-view" class="hidden">...</section>
        <section id="budgeting-module-view" class="hidden">...</section>


        <section id="crm-module-view" class="hidden">
            <header class="mb-8 border-b border-gray-700 pb-4">
                <div class="flex items-center justify-between">
                    <h1 class="text-4xl md:text-5xl font-extrabold text-indigo-400 tracking-tight flex items-center">
                        <svg class="w-8 h-8 md:w-10 md:h-10 mr-3 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        IGB å®¢æˆ¶é—œä¿‚ç®¡ç† (CRM Center)
                    </h1>

                    <div class="flex space-x-4 print-hide">
                        <span class="text-sm text-gray-500 flex items-center">
                            <span onclick="showView('main-menu')" class="cursor-pointer hover:text-blue-400">ERP ç¸½è¦½</span>
                            <span class="mx-2">/</span>
                            <span class="text-indigo-400 font-semibold">å®¢æˆ¶é—œä¿‚ç®¡ç†</span>
                        </span>
                        <button onclick="showView('main-menu')" class="flex items-center text-blue-400 hover:text-blue-300 transition duration-150 p-2 rounded-lg bg-gray-800 border border-blue-500/50">
                            <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
                            è¿”å›
                        </button>
                    </div>
                </div>
                <p class="text-lg text-gray-400 mt-2">
                    ç®¡ç†éŠ·å”®æµç¨‹ã€å®¢æˆ¶äº’å‹•æ­·å²è¨˜éŒ„åŠå®¢æˆ¶æœå‹™æ”¯æ´
                </p>
            </header>

            <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="dashboard-card bg-gray-800 p-5 rounded-xl shadow-lg border-l-4 border-indigo-500">
                    <p class="text-sm font-medium text-gray-400">ç•¶æœˆæ–°éŠ·å”®æ©Ÿæœƒ</p>
                    <p class="text-3xl font-bold text-indigo-300 mt-1">15</p>
                    <p class="text-xs text-gray-500 mt-2">ç¸½æ½›åœ¨åƒ¹å€¼: $ 850K</p>
                </div>

                <div class="dashboard-card bg-gray-800 p-5 rounded-xl shadow-lg border-l-4 border-yellow-500">
                    <p class="text-sm font-medium text-gray-400">éŠ·å”®è½‰æ›ç‡ (æœ¬å­£)</p>
                    <p class="text-3xl font-bold text-yellow-300 mt-1">22%</p>
                    <p class="text-xs text-gray-500 mt-2">è¼ƒä¸Šå­£å¢é•·: +3%</p>
                </div>

                <div class="dashboard-card bg-gray-800 p-5 rounded-xl shadow-lg border-l-4 border-red-500">
                    <p class="text-sm font-medium text-gray-400">å¾…è™•ç†æœå‹™å·¥å–®</p>
                    <p class="text-3xl font-bold text-red-300 mt-1">8</p>
                    <p class="text-xs text-gray-500 mt-2">SLA è‡¨ç•Œå€¼: 2 ç­†</p>
                </div>

                <div class="dashboard-card bg-gray-800 p-5 rounded-xl shadow-lg border-l-4 border-green-500">
                    <p class="text-sm font-medium text-gray-400">å¹³å‡å•é¡Œè§£æ±ºæ™‚é–“ (AHT)</p>
                    <p class="text-3xl font-bold text-green-300 mt-1">3.5 å°æ™‚</p>
                    <p class="text-xs text-gray-500 mt-2">ç›®æ¨™: 4 å°æ™‚ (å·²é”æˆ)</p>
                </div>
            </section>

            <div class="dashboard-card bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700 mb-8">
                <h2 class="text-xl font-bold text-gray-50 mb-4 flex items-center">
                    <svg class="inline w-5 h-5 mr-2 text-indigo-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3v18h12V3z"/><path d="M12 9v6"/><path d="M9 12h6"/></svg>
                    æœ¬æœˆéŠ·å”®æ¼æ–—é€²åº¦ (Pipeline)
                </h2>
                <div class="h-80">
                    <canvas id="salesFunnelChart"></canvas>
                </div>
            </div>

            <div class="bg-gray-800 p-6 rounded-xl shadow-2xl border border-gray-700 overflow-x-auto">
                <h2 class="text-xl font-bold text-gray-50 mb-4 flex items-center">
                    <svg class="w-5 h-5 mr-2 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20"/><path d="M17 5H7l-5 5 5 5h10l5-5-5-5z"/></svg>
                    é«˜åƒ¹å€¼å¾…è·Ÿé€²éŠ·å”®æ©Ÿæœƒ
                </h2>

                <ul class="space-y-3 mt-4">
                    <li class="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                        <div class="flex items-center">
                            <span class="text-yellow-400 mr-3 text-lg font-bold">L1</span>
                            <div>
                                <p class="text-sm font-semibold">å®¢æˆ¶: ä¾›æ‡‰å•† Delta (Aç´š) - éœ€è·Ÿé€²åˆç´„ç´°ç¯€</p>
                                <p class="text-xs text-gray-400">éšæ®µ: å ±åƒ¹/è«‡åˆ¤ | åƒ¹å€¼: $ 300,000 | é è¨ˆçµæ¡ˆ: 11/05</p>
                            </div>
                        </div>
                        <button onclick="showToast('å·²è¨˜éŒ„èˆ‡å®¢æˆ¶ Delta çš„é›»è©±è·Ÿé€²ã€‚', 'info')" class="px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded-full hover:bg-blue-700 print-hide">
                            è·Ÿé€²
                        </button>
                    </li>
                    <li class="flex items-center justify-between p-3 bg-gray-700 rounded-lg">
                        <div class="flex items-center">
                            <span class="text-indigo-400 mr-3 text-lg font-bold">L2</span>
                            <div>
                                <p class="text-sm font-semibold">å®¢æˆ¶: åŒ—éƒ¨è£½é€ å·¥å»  - é¦–æ¬¡ç”¢å“å±•ç¤ºå›é¥‹</p>
                                <p class="text-xs text-gray-400">éšæ®µ: ç”¢å“æ¼”ç¤º | åƒ¹å€¼: $ 150,000 | é è¨ˆçµæ¡ˆ: 11/30</p>
                            </div>
                        </div>
                        <button onclick="showToast('å·²æ’ç¨‹èˆ‡åŒ—éƒ¨è£½é€ å·¥å» çš„ä¸‹ä¸€æ¬¡æœƒè­°ã€‚', 'success')" class="px-3 py-1 text-xs font-medium text-white bg-green-600 rounded-full hover:bg-green-700 print-hide">
                            å®‰æ’æœƒè­°
                        </button>
                    </li>
                </ul>
            </div>
        </section>


    </div>

    <div id="toast-container" class="fixed bottom-5 right-5 z-50 space-y-3 print-hide">
        </div>

    <footer class="mt-10 pt-4 border-t border-gray-700 text-center text-gray-500 text-sm">
        <p>IGB ERP ç³»çµ± â€” æ•¸ä½åŒ–è½‰å‹çš„è—åœ– | 2025 å¹´</p>
    </footer>

    <script>
        // ===============================================
        // Chart.js å¯¦ä¾‹èˆ‡åˆå§‹åŒ–å‡½æ•¸
        // ===============================================
        let cashFlowChartInstance = null;
        let budgetVarianceChartInstance = null;
        let salesFunnelChartInstance = null; // æ–°å¢ CRM åœ–è¡¨å¯¦ä¾‹

        // (initializeCashFlowChart å’Œ initializeBudgetVarianceChart ä¿æŒä¸è®Š)

        // æ–°å¢ Sales Funnel åœ–è¡¨åˆå§‹åŒ–
        function initializeSalesFunnelChart() {
            const ctx = document.getElementById('salesFunnelChart');
            if (salesFunnelChartInstance) { salesFunnelChartInstance.destroy(); }

            // æ¨¡æ“¬éŠ·å”®æ¼æ–—æ•¸æ“š (åƒ¹å€¼)
            const salesData = [850000, 400000, 250000, 100000];
            const labels = ['æ½›åœ¨å®¢æˆ¶ (850K)', 'åˆæ ¼ç·šç´¢ (400K)', 'å ±åƒ¹éšæ®µ (250K)', 'å¾…çµæ¡ˆ (100K)'];
            const colors = ['#818cf8', '#a78bfa', '#c4b5fd', '#d8b4fe']; // Indigo/Violet tones

            salesFunnelChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'éŠ·å”®æ©Ÿæœƒåƒ¹å€¼ (TWD)',
                        data: salesData,
                        backgroundColor: colors,
                        // è®“ Bar æ©«å‘é¡¯ç¤º
                        indexAxis: 'y',
                        borderWidth: 1,
                        borderRadius: 5,
                        minBarLength: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y', // é—œéµï¼šè®“ Bar æ©«å‘
                    plugins: {
                        legend: { display: false },
                        title: { display: false }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#9ca3af',
                                callback: function(value) { return '$' + (value / 1000) + 'K'; }
                            },
                            grid: { color: '#374151' },
                            beginAtZero: true
                        },
                        y: {
                            ticks: { color: '#d1d5db' },
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function initializeCashFlowChart() {
            const ctx = document.getElementById('cashFlowChart');
            if (cashFlowChartInstance) { cashFlowChartInstance.destroy(); }
            const cashIn = [350000, 420000, 480000, 500000, 520000, 550000];
            const cashOut = [210000, 250000, 280000, 310000, 300000, 340000];
            const netCash = cashIn.map((c, i) => c - cashOut[i]);
            const chartData = {
                labels: ['å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ'],
                datasets: [
                    { label: 'ç¾é‡‘æµå…¥ (Cash In)', data: cashIn, borderColor: 'rgb(75, 192, 192)', backgroundColor: 'rgba(75, 192, 192, 0.2)', tension: 0.3, fill: true, yAxisID: 'y' },
                    { label: 'æ·¨ç¾é‡‘æµ (Net Flow)', data: netCash, borderColor: 'rgb(59, 130, 246)', backgroundColor: 'rgba(59, 130, 246, 0.4)', tension: 0.3, fill: false, yAxisID: 'y' },
                    { label: 'ç¾é‡‘æµå‡º (Cash Out)', data: cashOut, borderColor: 'rgb(239, 68, 68)', backgroundColor: 'rgba(239, 68, 68, 0.2)', tension: 0.3, fill: false, yAxisID: 'y', borderDash: [5, 5] }
                ]
            };
            cashFlowChartInstance = new Chart(ctx, {
                type: 'line', data: chartData, options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { labels: { color: '#d1d5db' } }, title: { display: false } },
                    scales: {
                        x: { ticks: { color: '#9ca3af' }, grid: { color: '#374151' } },
                        y: { beginAtZero: false, ticks: { color: '#9ca3af', callback: function(value, index, values) { return '$' + (value / 1000) + 'K'; } }, grid: { color: '#374151' } }
                    }
                }
            });
        }

        function initializeBudgetVarianceChart() {
            const ctx = document.getElementById('budgetVarianceChart');
            if (budgetVarianceChartInstance) { budgetVarianceChartInstance.destroy(); }
            const varianceData = [15000, -8000, 5000, -12000, 20000];
            const labels = ['ç ”ç™¼éƒ¨é–€', 'ç”Ÿç”¢è»Šé–“', 'å¸‚å ´è¡ŒéŠ·', 'è¡Œæ”¿ç®¡ç†', 'éŠ·å”®éƒ¨é–€'];
            budgetVarianceChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'é ç®—å·®ç•° (å¯¦éš› - é ç®—)',
                        data: varianceData,
                        backgroundColor: varianceData.map(v => v >= 0 ? 'rgba(74, 222, 128, 0.7)' : 'rgba(248, 113, 113, 0.7)'),
                        borderColor: varianceData.map(v => v >= 0 ? 'rgb(74, 222, 128)' : 'rgb(248, 113, 113)'),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, labels: { color: '#d1d5db' } },
                        title: { display: false }
                    },
                    scales: {
                        x: { stacked: false, ticks: { color: '#9ca3af' }, grid: { color: '#374151' } },
                        y: {
                            ticks: {
                                color: '#9ca3af',
                                callback: function(value) { return value >= 0 ? '$' + value.toLocaleString() : '-$' + Math.abs(value).toLocaleString(); }
                            },
                            grid: { color: '#374151' },
                            title: { display: true, text: 'å·®ç•°é‡‘é¡ (TWD)', color: '#9ca3af' }
                        }
                    }
                }
            });
        }

        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            let bgColor = 'bg-green-600';
            let iconSvg = '<svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>';

            if (type === 'error') { bgColor = 'bg-red-600'; iconSvg = '<svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" x2="9" y1="9" y2="15"/><line x1="9" x2="15" y1="9" y2="15"/></svg>'; }
            else if (type === 'warning') { bgColor = 'bg-yellow-600'; iconSvg = '<svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>'; }
            else if (type === 'success') { bgColor = 'bg-green-600'; iconSvg = '<svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M9 11l3 3L22 4"/></svg>'; }
            else if (type === 'info') { bgColor = 'bg-blue-600'; iconSvg = '<svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>'; }


            toast.className = `${bgColor} text-white p-4 rounded-lg shadow-xl flex items-center max-w-sm opacity-0 transition-opacity duration-300 transform translate-x-1/2`;
            toast.innerHTML = `${iconSvg}<span class="text-sm font-semibold">${message}</span>`;
            container.appendChild(toast);
            setTimeout(() => { toast.classList.remove('opacity-0', 'translate-x-1/2'); toast.classList.add('opacity-100', 'translate-x-0'); }, 50);
            setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-x-0');
                toast.classList.add('opacity-0', 'translate-x-1/2');
                setTimeout(() => { if (container.contains(toast)) { container.removeChild(toast); } }, 300);
            }, 3000);
        }

        function exportFinancialReport() { window.print(); }

        // â˜…â˜…â˜… æ›´æ–° showView å‡½æ•¸ä»¥åŒ…å« 'crm' è¦–åœ–åŠåœ–è¡¨åˆå§‹åŒ– â˜…â˜…â˜…
        function showView(viewId) {
            const views = {
                'main-menu': 'main-menu-view',
                'finance': 'finance-module-view',
                'gl': 'general-ledger-view',
                'ar': 'ar-module-view',
                'ap': 'ap-module-view',
                'fa': 'fa-module-view',
                'budgeting': 'budgeting-module-view',
                'crm': 'crm-module-view' // æ–°å¢ CRM è¦–åœ–
            };

            const targetId = views[viewId];
            if (!targetId) {
                console.error(`Invalid viewId: ${viewId}`);
                return;
            }

            Object.values(views).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.add('hidden');
                }
            });

            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                targetElement.classList.remove('hidden');
            } else {
                console.error(`Target view element not found for ID: ${targetId}`);
                return;
            }

            // è™•ç†åœ–è¡¨åˆå§‹åŒ–
            if (viewId === 'finance') {
                setTimeout(initializeCashFlowChart, 100);
            }

            if (viewId === 'budgeting') {
                window.requestAnimationFrame(() => {
                    initializeBudgetVarianceChart();
                    if (budgetVarianceChartInstance) {
                        budgetVarianceChartInstance.resize();
                    }
                });
            }

            // å°ˆé–€ç‚º CRM è¦–åœ–åˆå§‹åŒ–å…¶å°ˆå±¬åœ–è¡¨
            if (viewId === 'crm') {
                 window.requestAnimationFrame(() => {
                    initializeSalesFunnelChart();
                    if (salesFunnelChartInstance) {
                        salesFunnelChartInstance.resize();
                    }
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            showView('main-menu');
        });
    </script>

</body>
</html>
```
